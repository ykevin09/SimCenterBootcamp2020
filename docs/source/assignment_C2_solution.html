

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>C: Day 2 In Class Exercises &mdash; Programming Bootcamp 2020  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="C++: Day 3 In Class Exercises" href="assignment_C3.html" />
    <link rel="prev" title="C: Day 1 In Class Exercises" href="assignment_C1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Programming Bootcamp 2020
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="syllabus.html">Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="setupInstructions.html">Setup Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture_videos.html">Self-Study Videos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="assignments.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="assignment_day1.html">Python: Assignments Day 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment_day2.html">Python: Assignments Day 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment_day3.html">Python: Assignments Day 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment_day4.html">Python: Assignments Day 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment_day5.html">Python: Assignments Day 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignmentPreC.html">C: Assignment to Test Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment_C1.html">C: Day 1 In Class Exercises</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">C: Day 2 In Class Exercises</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem-1-reviewing-the-stress-transformation-problem">Problem 1: Reviewing the stress transformation problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#problem-2-using-structures">Problem 2: Using structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#problem-3-writing-data-for-use-by-other-programs-csv">Problem 3: Writing data for use by other programs: CSV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#problem-4-writing-to-a-binary-file">Problem 4: Writing to a binary file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#problem-5-reading-from-a-binary-file">Problem 5: Reading From a binary file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="assignment_C3.html">C++: Day 3 In Class Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TACC.html">TACC-Frontera</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="emacs.html">Emacs</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Questions, Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Programming Bootcamp 2020</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="assignments.html">Assignments</a> &raquo;</li>
        
      <li>C: Day 2 In Class Exercises</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/assignment_C2_solution.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c-day-2-in-class-exercises">
<h1>C: Day 2 In Class Exercises<a class="headerlink" href="#c-day-2-in-class-exercises" title="Permalink to this headline">¶</a></h1>
<p>Today we have several problems for you to tackle.
Parts should look and feel familiar from Day 1, though we will add more features as we go.
Those problems are modeled after exercises in Python and, thus, allow you to learn how data structures
compare when transitioning from python to C (and later C++).</p>
<div class="section" id="problem-1-reviewing-the-stress-transformation-problem">
<h2>Problem 1: Reviewing the stress transformation problem<a class="headerlink" href="#problem-1-reviewing-the-stress-transformation-problem" title="Permalink to this headline">¶</a></h2>
<p>Navigate to <strong>/code/c/ExerciseDay2/ex2-1/</strong> to find another solution for the stress transformation
problem.  The main difference to Frank’s solution is that this one places functions in separate files, as
well as adds a header file that contains the definition of the function without its implementation.</p>
<p>Compiling this version requires multiple steps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="n">stresstransform</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">c</span>
<span class="n">gcc</span> <span class="n">exercise2</span><span class="o">-</span><span class="mf">1.</span><span class="n">c</span> <span class="n">stresstransform</span><span class="o">.</span><span class="n">o</span> <span class="o">-</span><span class="n">lm</span>
</pre></div>
</div>
<p>And you can run the executable as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">a</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Imagine doing this for many more files, usually tens to hundreds.  That would be painstaking and
inefficient and very error prone.  Software engineers developed several tools to simplify and automate the compile
process.  One of those tools is <strong>cmake</strong>, a member of the <strong>make</strong> family of tools.  You find a
configuration file names <strong>CMakeList.txt</strong> in the source folder. The configuration
file is a plain text file, so you can and should check out how it is written:</p>
<div class="highlight-cmake notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span> <span class="p">(</span><span class="s">VERSION</span> <span class="s">2.6</span><span class="p">)</span>

<span class="nb">project</span> <span class="p">(</span><span class="s">Exercise2-1</span><span class="p">)</span>

<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">Exercise2-1</span> <span class="s">exercise2-1.c</span> <span class="s">stresstransform.c</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">Exercise2-1</span> <span class="s">m</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The compile process now becomes</p>
<p>1. a configuration step - done only once or every time you are adding a file to the project.  Inside the
source folder, execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir build
$ cd build
$ cmake ..
</pre></div>
</div>
<p>This will check your system for compilers and other development tool and create a <strong>Makefile</strong> in each
source folder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Placing the compile files into a <em>build</em> folder makes cleanup easier: simply delete
the entire <em>build</em> folder when done.  It can be regenerated easily using the above procedure.</p>
</div>
<p>2. From now on, every time you make changes to any of the files within your project, simply
type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make
</pre></div>
</div>
<p>to recompile all portions necessary and link all parts to one executable.  That process remains exactly the
same regardless of the number of files in your project.  Give it a try and see how convenient this is
especially for projects provided by somebody else.</p>
</div>
<div class="section" id="problem-2-using-structures">
<h2>Problem 2: Using structures<a class="headerlink" href="#problem-2-using-structures" title="Permalink to this headline">¶</a></h2>
<p>The implementation of <code class="code docutils literal notranslate"><span class="pre">StressTransform()</span></code> was intentionally done a bit clumsy, just the way a beginner might
write it. Your task in this exercise is to create a structure</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="p">{</span>
        <span class="n">double</span> <span class="n">sigx</span><span class="p">;</span>
        <span class="n">double</span> <span class="n">sigy</span><span class="p">;</span>
        <span class="n">double</span> <span class="n">tau</span><span class="p">;</span>
<span class="p">}</span> <span class="n">STRESS</span> <span class="p">;</span>
</pre></div>
</div>
<p>and modify the code from the previous exercise to utilize the much easier to read data structure provided
by this <code class="code docutils literal notranslate"><span class="pre">struct</span></code>.  Use the code skeleton provided in <strong>/code/c/ExerciseDay2/ex2-2</strong> to develop that
code.  The included <code class="code docutils literal notranslate"><span class="pre">CMakeList.txt</span></code> shall be used to compile your code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your modified <code class="code docutils literal notranslate"><span class="pre">StressTransform(...)</span></code> will require a pointer to a <code class="code docutils literal notranslate"><span class="pre">STRESS</span></code> type object.  The
way to achieve that in an efficient manner is to use a <code class="code docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">struct</span> <span class="pre">{...}</span> <span class="pre">STRESS</span> <span class="pre">;</span></code>.</p>
<p>In addition, inside the function that receives the pointer to a structure, assigning a new value to
entries in such a structure requires the syntax</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StressTransform</span><span class="p">(</span><span class="n">STRESS</span> <span class="n">stressIn</span><span class="p">,</span> <span class="n">STRESS</span> <span class="o">*</span><span class="n">stressOut</span><span class="p">,</span> <span class="o">....</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="n">stressIn</span><span class="o">-&gt;</span><span class="n">sigx</span> <span class="o">=</span> <span class="o">...</span> <span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This replaces the form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">sigx</span> <span class="o">=</span> <span class="o">...</span> <span class="p">;</span>
</pre></div>
</div>
<p>used for scalar-valued arguments.</p>
</div>
<p>A working solution is provided by the following set of files.</p>
<ul class="simple">
<li><p>stresstransform.c</p></li>
</ul>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;stresstransform.h&quot;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">StressTransform</span><span class="p">(</span><span class="n">STRESS</span> <span class="n">s</span><span class="p">,</span> <span class="n">STRESS</span> <span class="o">*</span><span class="n">sp</span><span class="p">,</span> <span class="kt">double</span> <span class="n">theta</span><span class="p">)</span> <span class="p">{</span>

	<span class="kt">double</span> <span class="n">pi</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">*</span><span class="n">atan</span><span class="p">(</span><span class="mf">1.</span><span class="p">);</span>
	<span class="kt">double</span> <span class="n">th</span> <span class="o">=</span> <span class="n">theta</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mf">180.</span><span class="p">;</span>

	<span class="kt">double</span> <span class="n">sn</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">th</span><span class="p">);</span>
	<span class="kt">double</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">th</span><span class="p">);</span>

	<span class="n">sp</span><span class="o">-&gt;</span><span class="n">sigx</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">sigx</span><span class="o">*</span><span class="n">cs</span><span class="o">*</span><span class="n">cs</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">sigy</span><span class="o">*</span><span class="n">sn</span><span class="o">*</span><span class="n">sn</span> <span class="o">+</span> <span class="mf">2.</span><span class="o">*</span><span class="n">s</span><span class="p">.</span><span class="n">tau</span><span class="o">*</span><span class="n">sn</span><span class="o">*</span><span class="n">cs</span><span class="p">;</span>
	<span class="n">sp</span><span class="o">-&gt;</span><span class="n">sigy</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">sigx</span><span class="o">*</span><span class="n">sn</span><span class="o">*</span><span class="n">sn</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">sigy</span><span class="o">*</span><span class="n">cs</span><span class="o">*</span><span class="n">cs</span> <span class="o">-</span> <span class="mf">2.</span><span class="o">*</span><span class="n">s</span><span class="p">.</span><span class="n">tau</span><span class="o">*</span><span class="n">sn</span><span class="o">*</span><span class="n">cs</span><span class="p">;</span>
	<span class="n">sp</span><span class="o">-&gt;</span><span class="n">tau</span>  <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">sigy</span> <span class="o">-</span> <span class="n">s</span><span class="p">.</span><span class="n">sigx</span><span class="p">)</span><span class="o">*</span><span class="n">sn</span><span class="o">*</span><span class="n">cs</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">tau</span><span class="o">*</span><span class="p">(</span><span class="n">cs</span><span class="o">*</span><span class="n">cs</span> <span class="o">-</span> <span class="n">sn</span><span class="o">*</span><span class="n">sn</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li><p>stresstransform.h</p></li>
</ul>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#ifndef STRESSTRANSFORM_H</span>
<span class="cp">#define STRESSTRANSFORM_H</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">double</span> <span class="n">sigx</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">sigy</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tau</span><span class="p">;</span>
<span class="p">}</span> <span class="n">STRESS</span> <span class="p">;</span>

<span class="kt">void</span> <span class="nf">StressTransform</span><span class="p">(</span><span class="n">STRESS</span> <span class="n">s</span><span class="p">,</span> <span class="n">STRESS</span> <span class="o">*</span><span class="n">sp</span><span class="p">,</span> <span class="kt">double</span> <span class="n">theta</span><span class="p">);</span>

<span class="cp">#endif</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li><p>exercise2-2.c</p></li>
</ul>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;stresstransform.h&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>

	<span class="n">STRESS</span> <span class="n">S0</span><span class="p">;</span>
	<span class="n">STRESS</span> <span class="n">Sp</span><span class="p">;</span>

	<span class="n">S0</span><span class="p">.</span><span class="n">sigx</span> <span class="o">=</span> <span class="mf">12.0</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">sigy</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.5</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">tau</span>  <span class="o">=</span>  <span class="mf">3.5</span><span class="p">;</span>

	<span class="n">StressTransform</span><span class="p">(</span><span class="n">S0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Sp</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">&quot;sigx&#39; = %12.6f</span><span class="se">\n</span><span class="s">sigy&#39; = %12.6f</span><span class="se">\n</span><span class="s">tau&#39;  = %12.6f</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigx</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigy</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">tau</span><span class="p">);</span>

	<span class="n">StressTransform</span><span class="p">(</span><span class="n">S0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Sp</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">);</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">&quot;sigx&#39; = %12.6f</span><span class="se">\n</span><span class="s">sigy&#39; = %12.6f</span><span class="se">\n</span><span class="s">tau&#39;  = %12.6f</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigx</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigy</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">tau</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="problem-3-writing-data-for-use-by-other-programs-csv">
<h3>Problem 3: Writing data for use by other programs: CSV<a class="headerlink" href="#problem-3-writing-data-for-use-by-other-programs-csv" title="Permalink to this headline">¶</a></h3>
<p>While C is very powerful for numeric computations, it can be impractical to generate graphs or fancy
images using the computed values.  A more efficient way is to use C to do the analysis, write results to
an easily readable file, and use specialized tools for the post-processing.  One common and simple format
is <strong>CSV</strong> (comma-separated-values), which van be read easily by MATLAB, python, or Excel.</p>
<p><strong>Your task</strong>: modify the code given in <strong>/code/c/ExerciseDay2/ex2-3</strong> to</p>
<p>1. Take one argument <span class="math notranslate nohighlight">\(\Delta\theta\)</span> in degrees after the name of the executable, defining the increment at
which transformed stress values shall be written:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Exercise2-3 5.0
</pre></div>
</div>
<p>The format of the output shall be for one angle per line, organized as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">theta</span><span class="p">,</span> <span class="n">sigma_x</span><span class="p">,</span> <span class="n">sigma_y</span><span class="p">,</span> <span class="n">tau_xy</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Output shall commence until an angle of <span class="math notranslate nohighlight">\(180^\circ\)</span> has been reached or exceeded.</p>
<p>Once your code outputs the information, run it once more and save the results to a file names
<strong>list.csv</strong> (make sure to add the spaces around the ‘&gt;’)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Exercise2-3 5.0 &gt; list.csv
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may want to download the file <strong>list.csv</strong> to your local computer before trying the next step, for it
will require access to your display.  That file can be opened in Excel and plotted there.  A more
efficient way is to prepare some nice plotting code, such as the provided <code class="code docutils literal notranslate"><span class="pre">plotter.py</span></code>.  In the same
folder where you placed <strong>list.csv</strong> run</p>
<p><strong>Windows 10</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="n">plotter</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p><strong>MacOS</strong> or <strong>Linux</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 plotter.py
</pre></div>
</div>
<p>Isn’t that nice?</p>
</div>
<p>A working solution is provided by the following set of files.</p>
<ul class="simple">
<li><p><em>stresstransform.c</em> and <em>stresstransform.h</em> are identical to the ones created for <strong>Problem 3</strong>.</p></li>
<li><p>exercise2-3.c</p></li>
</ul>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;    // need this for the constant pi = M_PI</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;stresstransform.h&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>

	<span class="c1">// get dth from the first argument.  This is given in degrees!</span>

	<span class="kt">double</span> <span class="n">dth</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">argc</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">dth</span> <span class="o">=</span> <span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">;</span> <span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span> <span class="n">dth</span> <span class="o">=</span> <span class="mf">22.5</span><span class="p">;</span> <span class="p">}</span>

	<span class="c1">// set the initial stress state</span>

	<span class="n">STRESS</span> <span class="n">S0</span><span class="p">;</span>

	<span class="n">S0</span><span class="p">.</span><span class="n">sigx</span> <span class="o">=</span> <span class="mf">12.0</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">sigy</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.5</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">tau</span>  <span class="o">=</span>  <span class="mf">3.5</span><span class="p">;</span>

	<span class="c1">// define  target container for transformed stress</span>

	<span class="n">STRESS</span> <span class="n">Sp</span><span class="p">;</span>

	<span class="c1">// loop to compute transformed states</span>

	<span class="k">for</span> <span class="p">(</span><span class="kt">double</span> <span class="n">th</span><span class="o">=</span><span class="mf">0.0</span><span class="p">;</span> <span class="n">th</span> <span class="o">&lt;=</span> <span class="mf">180.</span><span class="p">;</span> <span class="n">th</span><span class="o">+=</span><span class="n">dth</span><span class="p">)</span> <span class="p">{</span>

	    <span class="n">StressTransform</span><span class="p">(</span><span class="n">S0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Sp</span><span class="p">,</span> <span class="n">th</span><span class="p">);</span>
	    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%12.6f, %12.6f, %12.6f, %12.6f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">th</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigx</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">sigy</span><span class="p">,</span> <span class="n">Sp</span><span class="p">.</span><span class="n">tau</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>which creates a result like this:</p>
<div class="highlight-csv notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    0.000000,    12.000000,    -5.500000,     3.500000
    5.000000,    12.474836,    -5.974836,     1.927406
   10.000000,    12.669381,    -6.169381,     0.296248
   15.000000,    12.577722,    -6.077722,    -1.343911
   20.000000,    12.202646,    -5.702646,    -2.943236
   25.000000,    11.555547,    -5.055547,    -4.453132
   30.000000,    10.656089,    -4.156089,    -5.827722
   35.000000,     9.531600,    -3.031600,    -7.025240
   40.000000,     8.216249,    -1.716249,    -8.009299
   45.000000,     6.750000,    -0.250000,    -8.750000
   50.000000,     5.177406,     1.322594,    -9.224836
   55.000000,     3.546248,     2.953752,    -9.419381
   60.000000,     1.906089,     4.593911,    -9.327722
   65.000000,     0.306764,     6.193236,    -8.952646
   70.000000,    -1.203132,     7.703132,    -8.305547
   75.000000,    -2.577722,     9.077722,    -7.406089
   80.000000,    -3.775240,    10.275240,    -6.281600
   85.000000,    -4.759299,    11.259299,    -4.966249
   90.000000,    -5.500000,    12.000000,    -3.500000
   95.000000,    -5.974836,    12.474836,    -1.927406
  100.000000,    -6.169381,    12.669381,    -0.296248
  105.000000,    -6.077722,    12.577722,     1.343911
  110.000000,    -5.702646,    12.202646,     2.943236
  115.000000,    -5.055547,    11.555547,     4.453132
  120.000000,    -4.156089,    10.656089,     5.827722
  125.000000,    -3.031600,     9.531600,     7.025240
  130.000000,    -1.716249,     8.216249,     8.009299
  135.000000,    -0.250000,     6.750000,     8.750000
  140.000000,     1.322594,     5.177406,     9.224836
  145.000000,     2.953752,     3.546248,     9.419381
  150.000000,     4.593911,     1.906089,     9.327722
  155.000000,     6.193236,     0.306764,     8.952646
  160.000000,     7.703132,    -1.203132,     8.305547
  165.000000,     9.077722,    -2.577722,     7.406089
  170.000000,    10.275240,    -3.775240,     6.281600
  175.000000,    11.259299,    -4.759299,     4.966249
  180.000000,    12.000000,    -5.500000,     3.500000
</pre></div>
</td></tr></table></div>
<p>The <em>plotter.py</em> script that displays the data as Mohr’s circle is given here to show how simple it is to
generate nice plots <span class="red">automagically</span>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;list.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not find file: &#39;list.csv&#39;&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Mohr&#39;s circle&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;$\sigma_x$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;$</span><span class="se">\\</span><span class="s1">tau_</span><span class="si">{xy}</span><span class="s1">$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<div class="align-center figure" id="id1">
<img alt="../_images/Figure_2-3.png" src="../_images/Figure_2-3.png" />
<p class="caption"><span class="caption-text">Mohr’s circle created from <em>list.csv</em> and <em>plotter.py</em></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="problem-4-writing-to-a-binary-file">
<h3>Problem 4: Writing to a binary file<a class="headerlink" href="#problem-4-writing-to-a-binary-file" title="Permalink to this headline">¶</a></h3>
<p>Modify the code generated in the previous exercise to write a binary file names <em>mohrcircle.dta</em> instead
of the formatted ASCII data.  The data shall be exported in clocks composed of <code class="code docutils literal notranslate"><span class="pre">double</span> <span class="pre">theta</span></code>
followed by a block of <code class="code docutils literal notranslate"><span class="pre">STRESS</span></code> (or the three components of stress as <code class="code docutils literal notranslate"><span class="pre">double</span></code>).</p>
<p>You may be working of your code or use the provided code skeleton in <strong>/code/c/ExerciseDay2/ex2-4</strong>.</p>
<p>This time, your code should be totally silent on execution.  The only sign of success will be the creation
of the data file. For the next steps, run your program with the following parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Exercise2-4 5.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>How large do you expect the binary file to be?  Discuss, predicts, and check using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls -l mohrcircle.dta
</pre></div>
</div>
<p>You should be able to predict the <strong>exact</strong> number (to the byte!).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This problem comes with validation code, something worth developing every time you are working on
software that will be modified over an extended period of time and/or by multiple people.</p>
<p>The validation consists of (1) a C code <code class="code docutils literal notranslate"><span class="pre">parse.c</span></code> which reads the binary file and outputs its
contents to a <strong>CSV</strong> file, and (2) a shell script <code class="code docutils literal notranslate"><span class="pre">validate.sh</span></code> that attempts to run the
validation code and compares the output generated from your binary file to an output generated by a
correct code.</p>
<p>Run the validation script as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sh ./validate.sh
</pre></div>
</div>
<p>and check its feedback. (That script may not run on all platforms.)</p>
</div>
<p>A working solution is provided by the following set of files.</p>
<ul class="simple">
<li><p><em>stresstransform.c</em> and <em>stresstransform.h</em> are identical to the ones created for <strong>Problem 3</strong>.</p></li>
<li><p>exercise2-4.c</p></li>
</ul>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;stresstransform.h&quot;</span><span class="cp"></span>

<span class="cm">/* ************************************************************************</span>
<span class="cm"> * </span>
<span class="cm"> *      writing to a binary file</span>
<span class="cm"> *</span>
<span class="cm"> * ************************************************************************/</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>

	<span class="c1">// get dth from the first argument.  This is given in degrees!</span>

	<span class="kt">double</span> <span class="n">dth</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">argc</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dth</span> <span class="o">=</span> <span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
		<span class="n">dth</span> <span class="o">=</span> <span class="mf">22.5</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="c1">// open the file for writing </span>

	<span class="kt">FILE</span> <span class="o">*</span><span class="n">f_ptr</span><span class="p">;</span>

	<span class="n">f_ptr</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;mohrcircle.dta&quot;</span><span class="p">,</span><span class="s">&quot;wb&quot;</span><span class="p">);</span>

	<span class="c1">// define a data structure for a single entry in the file</span>

	<span class="k">struct</span> <span class="n">RESULT</span> <span class="p">{</span>
		<span class="kt">double</span> <span class="n">angle</span><span class="p">;</span>
		<span class="n">STRESS</span> <span class="n">thestress</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">result</span><span class="p">;</span>

	<span class="c1">// set the initial stress state</span>

	<span class="n">STRESS</span> <span class="n">S0</span><span class="p">;</span>

	<span class="n">S0</span><span class="p">.</span><span class="n">sigx</span> <span class="o">=</span> <span class="mf">12.0</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">sigy</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.5</span><span class="p">;</span>
	<span class="n">S0</span><span class="p">.</span><span class="n">tau</span>  <span class="o">=</span>  <span class="mf">3.5</span><span class="p">;</span>

	<span class="c1">// define  target container for transformed stress</span>

	<span class="n">STRESS</span> <span class="n">Sp</span><span class="p">;</span>

	<span class="c1">// loop to compute transformed states</span>

	<span class="k">for</span> <span class="p">(</span><span class="kt">double</span> <span class="n">th</span><span class="o">=</span><span class="mf">0.0</span><span class="p">;</span> <span class="n">th</span> <span class="o">&lt;=</span> <span class="mf">180.</span><span class="p">;</span> <span class="n">th</span><span class="o">+=</span><span class="n">dth</span><span class="p">)</span> <span class="p">{</span>

	    <span class="n">StressTransform</span><span class="p">(</span><span class="n">S0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Sp</span><span class="p">,</span> <span class="n">th</span><span class="p">);</span>

	    <span class="c1">//</span>
	    <span class="c1">// note:</span>
	    <span class="c1">//</span>
	    <span class="c1">// ... result is a structure. fwrite needs a reference to that structure</span>
	    <span class="c1">// ... sizeof(result) returns the number of bytes occupied by the ONE copy of result</span>
	    <span class="c1">// ... 1 is the number of blocks to write</span>
	    <span class="c1">// ... f_ptr is a pointer to the FILE handle</span>

            <span class="n">result</span><span class="p">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">th</span><span class="p">;</span>
	    <span class="n">result</span><span class="p">.</span><span class="n">thestress</span> <span class="o">=</span> <span class="n">Sp</span><span class="p">;</span>

	    <span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f_ptr</span><span class="p">);</span>

	<span class="p">}</span>

	<span class="c1">// done writing data -- close the file</span>
	<span class="n">fclose</span><span class="p">(</span><span class="n">f_ptr</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
</td></tr></table></div>
<p>Executing the generated executable as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Exercise2-4 5.0
</pre></div>
</div>
<p>creates a binary file <em>mohrcircle.dta</em> which has a size of (STRESS has 3 <span class="green">double</span> entires)</p>
<blockquote>
<div><p>(37 blocks) of (1 <span class="green">double</span> + 1 <span class="green">STRESS</span>) * ( 8 bytes/<span class="green">double</span> ) = 1184 bytes</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your system has <em>gcc</em> installed, you may run the validation script to check your solution.
Running it as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sh ./validate.sh
</pre></div>
</div>
<p>should generate the friendly answer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>**
** Your code passed with flying colors!
**
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Binary files are not readable by traditional ASCII editors (text editors).  Doings so, usually shows
some unintelligible scramble of characters, sometimes leaving your terminal in an unusable state.</p>
<p>However, you may view binary files using a <em>hex-dump</em> utility.  That approach may help you understand
and recover the structure of a binary file (though it still requires some practice and skill and
<strong>luck</strong>).  You may try such a tool on your binary file using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ xxd mohrcircle.dta | less
</pre></div>
</div>
<p>where the <code class="code docutils literal notranslate"><span class="pre">|</span> <span class="pre">less</span></code> pipes the output in a pager utility that allows you to search the output,
jump pages forward and backward, or move to any specific line.  Press <code class="code docutils literal notranslate"><span class="pre">q</span></code> to exit this utility.</p>
<p>You should get something like this output:</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></div></td><td class="code"><div class="highlight"><pre><span></span>00000000: 0000 0000 0000 0000 0000 0000 0000 2840  ..............(@
00000010: 0000 0000 0000 16c0 0000 0000 0000 0c40  ...............@
00000020: 0000 0000 0000 1440 ae3b bbc3 1df3 2840  .......@.;....(@
00000030: 5d77 7687 3be6 17c0 cc6a 053c a7d6 fe3f  ]wv.;....j.&lt;...?
00000040: 0000 0000 0000 2440 fa09 0419 b956 2940  ......$@.....V)@
00000050: f413 0832 72ad 18c0 2053 87d4 b9f5 d23f  ...2r... S.....?
00000060: 0000 0000 0000 2e40 ed49 1037 cb27 2940  .......@.I.7.&#39;)@
00000070: da93 206e 964f 18c0 d479 65e9 a880 f5bf  .. n.O...ye.....
00000080: 0000 0000 0000 3440 b684 0627 c167 2840  ......4@...&#39;.g(@
00000090: 6c09 0d4e 82cf 16c0 2b0a 6e55 bf8b 07c0  l..N....+.nU....
000000a0: 0000 0000 0000 3940 a435 96ac 701c 2740  ......9@.5..p.&#39;@
000000b0: 486b 2c59 e138 14c0 1376 18e6 01d0 11c0  Hk,Y.8...v......
000000c0: 0000 0000 0000 3e40 c550 d3e2 ea4f 2540  ......&gt;@.P...O%@
000000d0: 8ca1 a6c5 d59f 10c0 d893 206e 964f 17c0  .......... n.O..
000000e0: 0000 0000 0080 4140 23b9 5fee 2d10 2340  ......A@#._.-.#@
000000f0: 8fe4 7eb9 b740 08c0 b8ae 0b7f d819 1cc0  ..~..@..........
00000100: 0000 0000 0000 4440 f2ce f725 b86e 2040  ......D@...%.n @
00000110: 9077 be2f c175 fbbf 0bfb f1dd c204 20c0  .w./.u........ .
00000120: 0000 0000 0080 4640 0100 0000 0000 1b40  ......F@.......@
00000130: 1000 0000 0000 d0bf 0000 0000 0080 21c0  ..............!.
00000140: 0000 0000 0000 4940 b45a 01cf a9b5 1440  ......I@.Z.....@
00000150: 3695 fac3 5829 f53f ae3b bbc3 1d73 22c0  6...X).?.;...s&quot;.
00000160: 0000 0000 0080 4b40 69ea 903a b75e 0c40  ......K@i..:.^.@
00000170: 9415 6fc5 48a1 0740 f909 0419 b9d6 22c0  ..o.H..@......&quot;.
00000180: 0000 0000 0000 4e40 3686 9a16 577f fe3f  ......N@6...W..?
00000190: 745e 593a 2a60 1240 ee49 1037 cba7 22c0  t^Y:*`.@.I.7..&quot;.
000001a0: 0000 0000 0040 5040 98ae 8f54 05a2 d33f  .....@P@...T...?
000001b0: 1505 b7aa dfc5 1840 b684 0627 c1e7 21c0  .......@...&#39;..!.
000001c0: 0000 0000 0080 5140 40d8 6198 0740 f3bf  ......Q@@.a..@..
000001d0: 0f76 18e6 01d0 1e40 a435 96ac 709c 20c0  .v.....@.5..p. .
000001e0: 0000 0000 00c0 5240 b427 41dc 2c9f 04c0  ......R@.&#39;A.,...
000001f0: ed49 1037 cb27 2240 8aa1 a6c5 d59f 1dc0  .I.7.&#39;&quot;@........
00000200: 0000 0000 0000 5440 6e5d 17fe b033 0ec0  ......T@n]...3..
00000210: 5cd7 853f ec8c 2440 4872 bfdc 5b20 19c0  \..?..$@Hr..[ ..
00000220: 0000 0000 0040 5540 17f6 e3bb 8509 13c0  .....@U@........
00000230: 0cfb f1dd c284 2640 e19d ef4b 70dd 13c0  ......&amp;@...Kp...
00000240: 0000 0000 0080 5640 0000 0000 0000 16c0  ......V@........
00000250: 0000 0000 0000 2840 0200 0000 0000 0cc0  ......(@........
00000260: 0000 0000 00c0 5740 5d77 7687 3be6 17c0  ......W@]wv.;...
00000270: af3b bbc3 1df3 2840 c66a 053c a7d6 febf  .;....(@.j.&lt;....
00000280: 0000 0000 0000 5940 f313 0832 72ad 18c0  ......Y@...2r...
00000290: fa09 0419 b956 2940 2853 87d4 b9f5 d2bf  .....V)@(S......
000002a0: 0000 0000 0040 5a40 da93 206e 964f 18c0  .....@Z@.. n.O..
000002b0: ed49 1037 cb27 2940 d879 65e9 a880 f53f  .I.7.&#39;)@.ye....?
000002c0: 0000 0000 0080 5b40 6c09 0d4e 82cf 16c0  ......[@l..N....
000002d0: b684 0627 c167 2840 2b0a 6e55 bf8b 0740  ...&#39;.g(@+.nU...@
000002e0: 0000 0000 00c0 5c40 4a6b 2c59 e138 14c0  ......\@Jk,Y.8..
000002f0: a535 96ac 701c 2740 1076 18e6 01d0 1140  .5..p.&#39;@.v.....@
00000300: 0000 0000 0000 5e40 8ea1 a6c5 d59f 10c0  ......^@........
00000310: c850 d3e2 ea4f 2540 d693 206e 964f 1740  .P...O%@.. n.O.@
00000320: 0000 0000 0040 5f40 98e4 7eb9 b740 08c0  .....@_@..~..@..
00000330: 27b9 5fee 2d10 2340 b4ae 0b7f d819 1c40  &#39;._.-.#@.......@
00000340: 0000 0000 0040 6040 9277 be2f c175 fbbf  .....@`@.w./.u..
00000350: f2ce f725 b86e 2040 0afb f1dd c204 2040  ...%.n @...... @
00000360: 0000 0000 00e0 6040 1000 0000 0000 d0bf  ......`@........
00000370: 0100 0000 0000 1b40 0000 0000 0080 2140  .......@......!@
00000380: 0000 0000 0080 6140 2895 fac3 5829 f53f  ......a@(...X).?
00000390: b75a 01cf a9b5 1440 ae3b bbc3 1d73 2240  .Z.....@.;...s&quot;@
000003a0: 0000 0000 0020 6240 8c15 6fc5 48a1 0740  ..... b@..o.H..@
000003b0: 72ea 903a b75e 0c40 fb09 0419 b9d6 2240  r..:.^.@......&quot;@
000003c0: 0000 0000 00c0 6240 765e 593a 2a60 1240  ......b@v^Y:*`.@
000003d0: 2286 9a16 577f fe3f ed49 1037 cba7 2240  &quot;...W..?.I.7..&quot;@
000003e0: 0000 0000 0060 6340 1405 b7aa dfc5 1840  .....`c@.......@
000003f0: a8ae 8f54 05a2 d33f b684 0627 c1e7 2140  ...T...?...&#39;..!@
00000400: 0000 0000 0000 6440 0e76 18e6 01d0 1e40  ......d@.v.....@
00000410: 3cd8 6198 0740 f3bf a435 96ac 709c 2040  &lt;.a..@...5..p. @
00000420: 0000 0000 00a0 6440 eb49 1037 cb27 2240  ......d@.I.7.&#39;&quot;@
00000430: ac27 41dc 2c9f 04c0 8ea1 a6c5 d59f 1d40  .&#39;A.,..........@
00000440: 0000 0000 0040 6540 5ed7 853f ec8c 2440  .....@e@^..?..$@
00000450: 745d 17fe b033 0ec0 4572 bfdc 5b20 1940  t]...3..Er..[ .@
00000460: 0000 0000 00e0 6540 0afb f1dd c284 2640  ......e@......&amp;@
00000470: 11f6 e3bb 8509 13c0 eb9d ef4b 70dd 1340  ...........Kp..@
00000480: 0000 0000 0080 6640 0000 0000 0000 2840  ......f@......(@
00000490: ffff ffff ffff 15c0 0500 0000 0000 0c40  ...............@
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="problem-5-reading-from-a-binary-file">
<h3>Problem 5: Reading From a binary file<a class="headerlink" href="#problem-5-reading-from-a-binary-file" title="Permalink to this headline">¶</a></h3>
<p>Reading of data from files and placing them into containers such as Vectors is easy if you know the size of the data you are reading. If this is unknown the problem becomes more tricky. The solution presented on slide 22 worked for a small number of nputs, but failed with a segmentation fault for larger problems. You are to fix the problem. A copy of the offending files has been placed in the directory ex2-5 along with two files. The program can handle the first <strong>small.txt</strong>, it will fail with the second <strong>big.txt</strong>. Can you make the program work. The solution will test your understanding of file I/O,  memory management and pointers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No cmake or Makefile has been provided. You can compile the file with icc or whatever compiler you are using. The program takes a single input, the file to read. To compile and test the program, issue the following at the terminal prompt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">icc</span> <span class="n">file2</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">o</span> <span class="n">file2</span>
<span class="o">./</span><span class="n">file2</span> <span class="n">small</span><span class="o">.</span><span class="n">txt</span>
<span class="o">./</span><span class="n">file2</span> <span class="n">big</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="assignment_C3.html" class="btn btn-neutral float-right" title="C++: Day 3 In Class Exercises" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="assignment_C1.html" class="btn btn-neutral float-left" title="C: Day 1 In Class Exercises" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Peter Mackenzie-Helnwein, Frank McKenna

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>